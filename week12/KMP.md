# KMP 学习笔记

> kmp 用于匹配字符串

## 基础字符串匹配

### 简单的字符匹配说明

- *pattern* 指字符串需要匹配的模式
- *string* 是指给出的字符串

 现在有一个 *pattern* 为 `def`

一个字符串 *string* 为 `abcdefgh`

```c++
        1 2 3 4 5 6 7 8
string: a b c d e f g h
  
  			 1 2 3	
pattern: d e f
```

进行对 *string* 和 *pattern* 比对， 首先对比 `d` 和 `a` 是否相同

```ruby
a bcdefgh
d ef
```

不相同，将 *pattern* 向右移动一位

```ruby
a b cdefgh
  d ef
```

只要 *pattern* 第一个字符不能和 *string* 比对的字符相同都向右移动一位➡️；

直到相同为止

```ruby
abc d efgh
	  d ef
```

当 `def` 中的 `d` 和 `abcdefgh` 中的 `d` 匹配上，那么开始匹配 `def` 的第二位字符

```rust
abcd e fgh
   d e f
```

第二个字符匹配，开始匹配第三个字符

```dart
abcde f gh
   de f
```

第三个字符也相同

这样在 *string* 中就匹配了 *pattern*


| a    | b    | c    | d    | e    | f    | g    | h    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| d    | e    | f    |      |      |      |      |      |

| a    | b    | c    | d    | e    | f    | g    | h    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
|      | d    | e    | f    |      |      |      |      |

| a    | b    | c    | d    | e    | f    | g    | h    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
|      |      | d    | e    | f    |      |      |      |

| a    | b    | c    | d    | e    | f    | g    | h    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
|      |      |      | d    | e    | f    |      |      |

### 稍微复杂的字符串用基础匹配算法

*string:* ` abcababcd`

*pattern:* ` abcd`

定义 i 和 j 

用 i 和 j 来代表比对的字符的 `index`

| i    |      |      |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
| j    |      |      |      |      |      |      |      |      |

当 a 和 a 对比上的时候 i 和 j 向右移动

|      | i    |      |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
|      | j    |      |      |      |      |      |      |      |

|      |      | i    |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
|      |      | j    |      |      |      |      |      |      |

|      |      |      | i    |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
|      |      |      | j    |      |      |      |      |      |

当 a 和  d 不匹配时 i 回到 之前第一次匹配 的后一位。 j回到首位。 可以思考下 aaaad 和 aaad的匹配

|      | i    |      |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
| j    |      |      |      |      |      |      |      |      |

|      |      |      | i    |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
| j    |      |      |      |      |      |      |      |      |

|      |      |      |      | i    |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
|      | j    |      |      |      |      |      |      |      |

|      |      |      |      |      | i    |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
|      |      | j    |      |      |      |      |      |      |

|      |      |      |      | i    |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
| j    |      |      |      |      |      |      |      |      |

|      |      |      |      |      | i    |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
| j    |      |      |      |      |      |      |      |      |

|      |      |      |      |      |      | i    |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
|      | j    |      |      |      |      |      |      |      |

|      |      |      |      |      |      |      | i    |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
|      |      | j    |      |      |      |      |      |      |

|      |      |      |      |      |      |      |      | i    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a    | b    | c    | a    | b    | a    | b    | c    | d    |
| a    | b    | c    | d    |      |      |      |      |      |
|      |      |      | j    |      |      |      |      |      |

这种字符匹配方式的时间复杂度为 m*n 

## KMP 字符

